<!DOCTYPE html>
<!--
  ~ Copyright 2015 Alexander Orlov <alexander.orlov@loxal.net>. All rights reserved.
  -->

<!--<html manifest="cache.appcache">-->
<meta charset="UTF-8">
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
<title>Dilbert Quotes</title>

<script>
    "use strict";
    function main() {
        var quoteResourcePath = "/dilbert-quote/dev-excuse";

        var configure = function () {
            var roleContainer = document.getElementById("role");

            var config = JSON.parse(document.location.hash.substr(1));
            var role = config.role;
            var quoteId = config.quoteId;

            var manager = "Manager";
            var programmer = "Programmer";
            switch (role) {
                case manager:
                    roleContainer.textContent = manager;
                    quoteResourcePath = "/dilbert-quote/manager";
                    break;
                case programmer:
                    roleContainer.textContent = programmer;
                    quoteResourcePath = "/dilbert-quote/dev-excuse";
                    break;
            }

            if (quoteId) {
                quoteResourcePath += "/" + quoteId;
            }
        };

        var loadQuote = function () {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var quote = JSON.parse(xhr.response);
                    var quoteContainer = document.getElementById("quote");
                    quoteContainer.textContent = quote.quote;
                }
            };
            xhr.open("GET", quoteResourcePath, true);
            xhr.send();
        };

        if (document.location.hash) {
            configure();
        }
        loadQuote();
    }
</script>

<style type="text/css">
    @import url(http://fonts.googleapis.com/css?family=Courgette|Playball);

    html {
        font-size: 40px;
        vertical-align: middle;
        text-align: center;
        font-family: 'Courgette', cursive;
        margin-top: 30%;
    }

    .quotationMarks {
        font-size: 55px;
    }
</style>

<body onload="main()">
<strong>
    <span class="quotationMarks">“</span><span id="quote"></span><span class="quotationMarks">”</span>
</strong>
<br/><br/>
<span style="font-size: 20px; float: right;">— Dilbert, the <span id="role">Programmer</span></span>
</body>

